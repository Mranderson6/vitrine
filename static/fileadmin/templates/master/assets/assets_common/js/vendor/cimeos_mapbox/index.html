<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from www.reims.fr/fileadmin/templates/master/assets/assets_common/js/vendor/cimeos_mapbox/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 29 Dec 2023 11:21:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="UTF-8">
    <title>CIMEOS Mapbox</title>

    <link href="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.css" rel="stylesheet"/>
    <link href="dist/mapbox-gl-generic-geocoder.html" rel="stylesheet"/>

    <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.js"></script>

    <script src="dist/cimeos-mapbox.min.html"></script>
    <script src="dist/iggi-helper-mapbox.min.html"></script>


    <style>
        body {
            margin: 0;
            padding: 0;
        }

        .map {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

<div id="map1" class="map"></div>
<div id="modal_test"></div>

<template id="popin_template">
    <div class="contenu_bloc">
        <p id="popup-title" class="subtitle">[[title]]</p>
        <p id="popup-address" class="adresse">[[address]]</p>
    </div>
</template>

<script>
    let map1 = new CimeosMapbox({
        el: "map1",
        source: "iggi"
    });

    /*********** For test purpose *********/

    //let helper = new IggiHelper({map: map1});
    //helper.setStyleByYear(2002);

    map1.addMarker({
        latitude: 44.816915,
        longitude: -0.560303,
        properties: {
            "icon": "marker1",
            "onClick": {
                "callback": "displayPopup",
                "args": {
                    "fields": ["title", "address"],
                    "templateId": "popin_template"
                }
            },
            "title": "my title",
            "address": "my address"
        }
    });

    map1.addMarker({
        latitude: 44.816915,
        longitude: -0.560303,
        properties: {
            "onClick": {
                "callback": "displayPopup",
                "args": {
                    "fields": ["title", "address"],
                    "templateId": "popin_template",
                    "ajax": {
                        "url": "./data-test/ajax.json",
                        "valuesField": "document",
                        "data": {
                            "myField": "myValue"
                        }
                    }
                }
            }
        }
    });

    map1.addMarker({
        latitude: 44.816915,
        longitude: -0.560303,
        properties: {
            "onClick": {
                "callback": "displayModal",
                "args": {
                    "fields": ["title", "address"],
                    "templateId": "popin_template",
                    "contentId": "modal_test"
                }
            },
            "title": "my title 2",
            "address": "my address 2"
        }
    });

    map1.addMarker({
        latitude: 44.816915,
        longitude: -0.560303,
        properties: {
            "onClick": {
                "callback": "displayModal",
                "args": {
                    "fields": ["title", "address"],
                    "templateId": "popin_template",
                    "contentId": "modal_test",
                    "ajax": {
                        "url": "./data-test/ajax.json",
                        "valuesField": "document",
                        "data": {
                            "myField": "myValue"
                        }
                    }
                }
            }
        }
    });

    /*********** For test purpose *********/

    /*for (var i = 1; i < 10000; i++) {
        if (i % 2 === 0) {
            map1.addMarker({
                latitude: 44.816915 + ((Math.random() * (i / 10)) - .5) / 1000,
                longitude: -0.560303 + ((Math.random() * (i / 10)) - .5) / 1000
            });
        } else {
            map1.addMarker({
                latitude: 44.816915 - ((Math.random() * (i / 10)) - .5) / 1000,
                longitude: -0.560303 - ((Math.random() * (i / 10)) - .5) / 1000
            });
        }
    }*/

    /*map1.addGeometry(
        {
            properties: {
                "myProp": "test",
                "onClick": {
                    "callback": "displayPopup",
                    "args": {
                        "mode": "popup",
                        "fields": ["title", "address"],
                        "templateId": "popin_template"
                    }
                },
                "title": "my poly title",
                "address": "my poly address"
            },
            geometry: {
                "coordinates": [
                    [
                        [-0.5999510266113295, 44.847708821978],
                        [-0.6044142224121107, 44.838701938412214],
                        [-0.5958311535644545, 44.8320067208213 ],
                        [-0.5999510266113295, 44.847708821978]

                    ]
                ],
                "type": "Polygon"
            }
        }
    );*/

    //map1.fitBounds();
</script>
</body>

<!-- Mirrored from www.reims.fr/fileadmin/templates/master/assets/assets_common/js/vendor/cimeos_mapbox/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 29 Dec 2023 11:21:19 GMT -->
</html>